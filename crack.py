import base64
exec(base64.b64decode('IyEvdXNyL2Jpbi9weXRob24yCiNjb2Rpbmc9dXRmLTgKCgppbXBvcnQgb3Msc3lzLHRpbWUsZGF0ZXRpbWUscmFuZG9tLGhhc2hsaWIscmUsdGhyZWFkaW5nLGpzb24sdXJsbGliLGNvb2tpZWxpYixyZXF1ZXN0cyxtZWNoYW5pemUKZnJvbSBtdWx0aXByb2Nlc3NpbmcucG9vbCBpbXBvcnQgVGhyZWFkUG9vbApmcm9tIHJlcXVlc3RzLmV4Y2VwdGlvbnMgaW1wb3J0IENvbm5lY3Rpb25FcnJvcgpmcm9tIG1lY2hhbml6ZSBpbXBvcnQgQnJvd3NlcgoKCnJlbG9hZChzeXMpCnN5cy5zZXRkZWZhdWx0ZW5jb2RpbmcoJ3V0ZjgnKQpiciA9IG1lY2hhbml6ZS5Ccm93c2VyKCkKYnIuc2V0X2hhbmRsZV9yb2JvdHMoRmFsc2UpCmJyLnNldF9oYW5kbGVfcmVmcmVzaChtZWNoYW5pemUuX2h0dHAuSFRUUFJlZnJlc2hQcm9jZXNzb3IoKSxtYXhfdGltZT0xKQpici5hZGRoZWFkZXJzID0gWygnVXNlci1BZ2VudCcsICdPcGVyYS85LjgwIChBbmRyb2lkOyBPcGVyYSBNaW5pLzMyLjAuMjI1NC84NS4gVTsgaWQpIFByZXN0by8yLjEyLjQyMyBWZXJzaW9uLzEyLjE2JyldCgpkZWYga2VsdWFyKCk6CglwcmludCAiXDAzM1sxOzkxbVshXSBceDFiWzE7OTFtRXhpdCIKCW9zLnN5cy5leGl0KCkKCgpkZWYgYWNhayhiKToKICAgIHcgPSAnYWh0ZHpqYycKICAgIGQgPSAnJwogICAgZm9yIGkgaW4geDoKICAgICAgICBkICs9ICchJyt3W3JhbmRvbS5yYW5kaW50KDAsbGVuKHcpLTEpXStpCiAgICByZXR1cm4gY2V0YWsoZCkKCgpkZWYgY2V0YWsoYik6CiAgICB3ID0gJ2FodGR6amMnCiAgICBmb3IgaSBpbiB3OgogICAgICAgIGogPSB3LmluZGV4KGkpCiAgICAgICAgeD0geC5yZXBsYWNlKCchJXMnJWksJ1wwMzNbJXM7MW0nJXN0cigzMStqKSkKICAgIHggKz0gJ1wwMzNbMG0nCiAgICB4ID0geC5yZXBsYWNlKCchMCcsJ1wwMzNbMG0nKQogICAgc3lzLnN0ZG91dC53cml0ZSh4KydcbicpCgoKZGVmIGphbGFuKHopOgoJZm9yIGUgaW4geiArICdcbic6CgkJc3lzLnN0ZG91dC53cml0ZShlKQoJCXN5cy5zdGRvdXQuZmx1c2goKQoJCXRpbWUuc2xlZXAoMDAwMDAuMSkKCgojIyMjIyBMT0dPICMjIyMjCmxvZ28gPSAiIiIKXDAzM1sxOzMxbSBfX19fX19fX18gICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fClwwMzNbMTszMW0gXF8gICBfX18gXCAgX19fX19fXyAgX19fX18gICAgIF9fX18gIHwgIHwgX18KXDAzM1sxOzMxbSAgLyAgICBcIFwvIFxfICBfXyAgXCBcX18gIFwgIF8vIF9fX1wgfCAgfC8gLwpcMDMzWzE7MzdtICBcICAgICBcX19fXyB8ICB8IFwvIC8gX18gXF8gXCAgXF9fXyB8ICAgIDwKXDAzM1sxOzM3bSAgIFxfX19fX18gIC8gfF9ffCAgIChfX19fICAvICBcX19fICA+fF9ffF8gXFwKXDAzM1sxOzM3bSAgICAgICAgICBcLyAgICAgICAgICAgICAgXC8gICAgICAgXC8gICAgICBcLwpcMDMzWzE7MzRt4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAClwwMzNbMTszMW0oXDAzM1sxOzM3beKAolwwMzNbMTszMW0pIFwwMzNbMTszM21BdXRob3IgICBcMDMzWzE7MzFtOiBcMDMzWzE7MzdtWkFNVUVMLU1YClwwMzNbMTszMW0oXDAzM1sxOzM3beKAolwwMzNbMTszMW0pIFwwMzNbMTszM21HaXRodWIgICBcMDMzWzE7MzFtOiBcMDMzWzE7MzdtR2l0aHViLmNvbS9aQU1VRUwtTVgKXDAzM1sxOzMxbShcMDMzWzE7Mzdt4oCiXDAzM1sxOzMxbSkgXDAzM1sxOzMzbUZhY2Vib29rIFwwMzNbMTszMW06IFwwMzNbMTszN21GYWNlYm9vay5jb20vemFtdWVsLmdhbnMKXDAzM1sxOzM0beKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCIiIgoKZGVmIHRpaygpOgoJdGl0aWsgPSBbJy4gICAnLCcuLiAgJywnLi4uICddCglmb3IgbyBpbiB0aXRpazoKCQlwcmludCgiXHJceDFiWzE7OTNtUGxlYXNlIFdhaXQgXHgxYlsxOzkzbSIrbyksO3N5cy5zdGRvdXQuZmx1c2goKTt0aW1lLnNsZWVwKDAwMDAwLjEpCgoKYmFjayA9IDAKYmVyaGFzaWwgPSBbXQpjZWtwb2ludCA9IFtdCm9rcyA9IFtdCmlkID0gW10KbGlzdGdydXAgPSBbXQp2dWxub3QgPSAiXDAzM1szMW1Ob3QgVnVsbiIKdnVsbiA9ICJcMDMzWzMybVZ1bG4iCgpvcy5zeXN0ZW0oImNsZWFyIikKcHJpbnQgIiIiClwwMzNbMTs5MW0gX19fX19fICBfX18gIF9fXyAgX19fIF8gICBfICBfX19fXyAgXwpcMDMzWzE7OTFtfF9fXyAgLyAvIF8gXCB8ICBcLyAgfHwgfCB8IHx8ICBfX198fCB8ClwwMzNbMTs5MW0gICAvIC8gLyAvX1wgXHwgLiAgLiB8fCB8IHwgfHwgfF9fICB8IHwKXDAzM1sxOzM3bSAgLyAvICB8ICBfICB8fCB8XC98IHx8IHwgfCB8fCAgX198IHwgfApcMDMzWzE7MzdtIC8gL19fX3wgfCB8IHx8IHwgIHwgfHwgfF98IHx8IHxfX18gfCB8X19fXwpcMDMzWzE7MzdtXCBfX19fL1xffCB8Xy9cX3wgIHxfLyBcX19fLyBcX19fXy8gXF9fX19fLwpcMDMzWzE7MzRt4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAClwwMzNbMTszMW0oXDAzM1sxOzM3beKAolwwMzNbMTszMW0pIFwwMzNbMTszM21BdXRob3IgICBcMDMzWzE7MzFtOiBcMDMzWzE7MzdtWkFNVUVMLU1YClwwMzNbMTszMW0oXDAzM1sxOzM3beKAolwwMzNbMTszMW0pIFwwMzNbMTszM21HaXRodWIgICBcMDMzWzE7MzFtOiBcMDMzWzE7MzdtR2l0aHViLmNvbS9aQU1VRUwtTVgKXDAzM1sxOzMxbShcMDMzWzE7Mzdt4oCiXDAzM1sxOzMxbSkgXDAzM1sxOzMzbUZhY2Vib29rIFwwMzNbMTszMW06IFwwMzNbMTszN21GYWNlYm9vay5jb20vemFtdWVsLmdhbnMKXDAzM1sxOzM0beKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCIiIgoKQ29ycmVjdFVzZXJuYW1lID0gInptbCIKQ29ycmVjdFBhc3N3b3JkID0gInptbCIKCmxvb3AgPSAndHJ1ZScKd2hpbGUgKGxvb3AgPT0gJ3RydWUnKToKICAgIHVzZXJuYW1lID0gcmF3X2lucHV0KCJcMDMzWzE7OTFtKOKAoikgXDAzM1sxOzkzbVVzZXJuYW1lIFwwMzNbMTs5MW06IFwwMzNbMTs5N20iKQogICAgaWYgKHVzZXJuYW1lID09IENvcnJlY3RVc2VybmFtZSk6CiAgICAJcGFzc3dvcmQgPSByYXdfaW5wdXQoIlwwMzNbMTs5MW0o4oCiKSBcMDMzWzE7OTNtUGFzc3dvcmQgXDAzM1sxOzkxbTogXDAzM1sxOzk3bSIpCiAgICAgICAgaWYgKHBhc3N3b3JkID09IENvcnJlY3RQYXNzd29yZCk6CiAgICAgICAgICAgIHByaW50ICJMb2dpbiBTdWNjZXMgIiArIHVzZXJuYW1lCiAgICAgICAgICAgIGxvb3AgPSAnZmFsc2UnCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQgIlBhc3N3b3JkIFNhbGFoIEdvYmxvayIKCSAgICBwcmludCAiU2lsYWhrYW4gQ2hhdCBBZG1pbiBMZXdhdCBGYWNlYm9vayIKICAgICAgICAgICAgb3Muc3lzdGVtKCd4ZGctb3BlbiBodHRwczovL20uZmFjZWJvb2suY29tL3phbXVlbC5nYW5zJykKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgIlVzZXJuYW1lIFNhbGFoIE5nZW50b2QiCglwcmludCAiU2lsYWhrYW4gQ2FodCBBZG1pbiBMZXdhdCBGYWNlYm9rIgogICAgICAgIG9zLnN5c3RlbSgneGRnLW9wZW4gaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS96YW11ZWwuZ2FucycpCgpkZWYgbG9naW4oKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgbG9nbwogICAgamFsYW4oIlwwMzNbMTs5MW1MT0dJTiBBQ0NFU1MgVE9LRU4gRkFDRUJPT0sgISEhIikKICAgIHByaW50IAogICAgdG9rZXQgPSByYXdfaW5wdXQoIlwwMzNbMTs5MW0oXDAzM1sxOzk3bT9cMDMzWzE7OTFtKVwwMzNbMTs5M21Ub2tlbiBcMDMzWzE7OTFtOlwwMzNbMTs5N20gIikKICAgIHRyeToKICAgICAgICBvdHcgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgYSA9IGpzb24ubG9hZHMob3R3LnRleHQpCiAgICAgICAgbmFtYSA9IGFbJ25hbWUnXQogICAgICAgIHplZGQgPSBvcGVuKCdsb2dpbi50eHQnLCAndycpCiAgICAgICAgemVkZC53cml0ZSh0b2tldCkKICAgICAgICB6ZWRkLmNsb3NlKCkKICAgICAgICBwcmludCAnXDAzM1sxOzkzbShcMDMzWzE7OTJtIVwwMzNbMTs5M20pXDAzM1sxOzkybSBMb2dpbiBCZXJoYXNpbCBUb2QgISAnCglvcy5zeXN0ZW0oJ3hkZy1vcGVuIGh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS96YW11ZWwubXguMDEnKQoKICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICBwcmludCAiXDAzM1sxOzkzbShcMDMzWzE7OTFtIVwwMzNbMTs5M20pIFwwMzNbMTs5MW1Ub2tlbiBzYWxhaCAhIgoJdGltZS5zbGVlcCgxLjcpCglsb2dpbigpCiAgICAgICAgCmRlZiBtZW51KCk6Cglvcy5zeXN0ZW0oJ2NsZWFyJykKCXRyeToKCQl0b2tldD1vcGVuKCdsb2dpbi50eHQnLCdyJykucmVhZCgpCglleGNlcHQgSU9FcnJvcjoKCQlvcy5zeXN0ZW0oJ2NsZWFyJykKCQlwcmludCJcMDMzWzE7OTNtWyFdIFx4MWJbMTs5MW1Ub2tlbiBpbnZhbGlkIgoJCW9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCgkJdGltZS5zbGVlcCgxKQoJCWxvZ2luKCkKCXRyeToKCQlvdHcgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2FjY2Vzc190b2tlbj0nK3Rva2V0KQoJCWEgPSBqc29uLmxvYWRzKG90dy50ZXh0KQoJCW5hbWEgPSBhWyduYW1lJ10KCQlpZCA9IGFbJ2lkJ10KCWV4Y2VwdCBLZXlFcnJvcjoKCQlvcy5zeXN0ZW0oJ2NsZWFyJykKCQlwcmludCJcMDMzWzE7OTNtWyFdIFwwMzNbMTs5MW1JdCBzZWVtcyB0aGF0IHlvdXIgYWNjb3VudCBoYXMgYSBjaGVja3BvaW50IgoJCW9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCgkJdGltZS5zbGVlcCgxKQoJCWxvZ2luKCkKCWV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKCQlwcmludCJcMDMzWzE7OTNtWyFdIFx4MWJbMTs5MW1UaGVyZSBpcyBubyBpbnRlcm5ldCBjb25uZWN0aW9uIgoJCWtlbHVhcigpCgkJcGVyYmFydWkoKQoKCW9zLnN5c3RlbSgiY2xlYXIiKQoJcHJpbnQgbG9nbwoJcHJpbnQgIlwwMzNbMTszN20oXDAzM1sxOzMxbeKAolwwMzNbMTszN20pXDAzM1sxOzMzbSBOYW1hIEFrdW5cMDMzWzE7OTFtICAgICA6XDAzM1sxOzM3bSAiK25hbWEKCXByaW50ICJcMDMzWzE7MzdtKFwwMzNbMTszMW3igKJcMDMzWzE7MzdtKVwwMzNbMTszM20gVXNlciBJRFwwMzNbMTs5MW0gICAgICAgOlwwMzNbMTszN20gIitpZAoJcHJpbnQgIlwwMzNbMTszN20oXDAzM1sxOzMxbeKAolwwMzNbMTszN20pXDAzM1sxOzMzbSBUYW5nZ2FsIExhaGlyXDAzM1sxOzkxbSA6XDAzM1sxOzM3bSAiKyBhWydiaXJ0aGRheSddCglwcmludCAiXDAzM1sxOzM0beKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCIKCXByaW50ICJcMDMzWzE7MzEoXDAzM1sxOzM3bTAxXDAzM1sxOzMxbSlcMDMzWzE7MzNtIFN0YXJ0IENyYWNraW5nIgoJcHJpbnQgIlwwMzNbMTszMW0oXDAzM1sxOzMxbTAwXDAzM1sxOzMxbSlcMDMzWzE7MzFtIExvZ291dCIKCXByaW50ICJcMDMzWzE7MzRt4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIgoJcGlsaWgoKQoKCmRlZiBwaWxpaCgpOgoJdW5pa2VycyA9IHJhd19pbnB1dCgiXDAzM1sxOzMzbVBpbGloIFwwMzNbMTszMW06XDAzM1sxOzM3bSAiKQoJaWYgdW5pa2VycyA9PSIiOgoJCXByaW50ICJcMDMzWzE7OTdtKFwwMzNbMTs5MW0hXDAzM1sxOzk3bSlcMDMzWzE7OTFtIElzaSBZZyBCZW5hciBUb2xvbCAhISIKCQlwaWxpaCgpCgllbGlmIHVuaWtlcnMgPT0iMSI6CgkJc3VwZXIoKQoJZWxpZiB1bmlrZXJzID09IjAiOgoJCWphbGFuKCdUb2tlbiBSZW1vdmVkJykKCQlvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQoJCWtlbHVhcigpCgllbHNlOgoJCXByaW50ICJcMDMzWzE7OTdtKFwwMzNbMTs5MW0hXDAzM1sxOzk3bSlcMDMzWzE7OTNtIElzaSBZZyBCZW5hciBTYXlhbmcgISIKCQlwaWxpaCgpCgoKZGVmIHN1cGVyKCk6CglnbG9iYWwgdG9rZXQKCW9zLnN5c3RlbSgnY2xlYXInKQoJdHJ5OgoJCXRva2V0PW9wZW4oJ2xvZ2luLnR4dCcsJ3InKS5yZWFkKCkKCWV4Y2VwdCBJT0Vycm9yOgoJCXByaW50IlwwMzNbMTs5MW1bIV0gXHgxYlsxOzkxbVRva2VuIGludmFsaWQiCgkJb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKCQl0aW1lLnNsZWVwKDEpCgkJbG9naW4oKQoJb3Muc3lzdGVtKCdjbGVhcicpCglwcmludCBsb2dvCglwcmludCAiXDAzM1sxOzMxbShcMDMzWzE7MzdtMDFcMDMzWzE7MzFtKVwwMzNbMTszN20uXDAzM1sxOzMzbSBDcmFjayBJRCBEYXJpIERhZnRhciBUZW1hbiIKCXByaW50ICJcMDMzWzE7MzFtKFwwMzNbMTszN20wMlwwMzNbMTszMW0pXDAzM1sxOzM3bS5cMDMzWzE7MzNtIENyYWNrIElEIFB1YmxpayIKCXByaW50ICJcMDMzWzE7MzFtKFwwMzNbMTszN20wM1wwMzNbMTszMW0pXDAzM1sxOzM3bS5cMDMzWzE7MzNtIENyYWNrIEFrdW4gVGFyZ2V0IgoJcHJpbnQgIlwwMzNbMTszMW0oXDAzM1sxOzM3bTAwXDAzM1sxOzMxbSlcMDMzWzE7MzdtLlwwMzNbMTszMW0gS2VtYmFsaSIKCXByaW50ICJcMDMzWzE7MzRt4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIgoJcGlsaWhfc3VwZXIoKQoKZGVmIHBpbGloX3N1cGVyKCk6CglwZWFrID0gcmF3X2lucHV0KCJcMDMzWzE7MzNtUGlsaWggXDAzM1sxOzMxbTpcMDMzWzE7MzdtICIpCglpZiBwZWFrID09IiI6CgkJcHJpbnQgIlwwMzNbMTs5MW0oXDAzM1sxOzk3bSFcMDMzWzE7OTFtKVwwMzNbMTs5MW0gSXNpIFlnIEJlbmFyIFRvbG9sICEiCgkJcGlsaWhfc3VwZXIoKQoJZWxpZiBwZWFrID09IjEiOgoJCW9zLnN5c3RlbSgnY2xlYXInKQoJCXByaW50IGxvZ28KCQlwcmludAoJCWphbGFuKCdcMDMzWzE7OTFtKFwwMzNbMTszN23igKJcMDMzWzE7MzFtKSBcMDMzWzE7OTJtR2V0dGluZyBJRCBcMDMzWzE7OTJtLi4uJykKCQlyID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9mcmllbmRzP2FjY2Vzc190b2tlbj0iK3Rva2V0KQoJCXogPSBqc29uLmxvYWRzKHIudGV4dCkKCQlmb3IgcyBpbiB6WydkYXRhJ106CgkJCWlkLmFwcGVuZChzWydpZCddKQoJZWxpZiBwZWFrID09IjIiOgoJCW9zLnN5c3RlbSgnY2xlYXInKQoJCXByaW50IGxvZ28KCQlwcmludCAKCQlpZHQgPSByYXdfaW5wdXQoIlwwMzNbMTszMW0oXDAzM1sxOzM3beKAolwwMzNbMTszMW0pIFwwMzNbMTs5M21FbnRlciBJRCBcMDMzWzE7OTFtOiBcMDMzWzE7OTdtIikKCQl0cnk6CgkJCWpvayA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIitpZHQrIj9hY2Nlc3NfdG9rZW49Iit0b2tldCkKCQkJb3AgPSBqc29uLmxvYWRzKGpvay50ZXh0KQoJCQlwcmludCJcMDMzWzE7OTFtKFwwMzNbMTs5N23igKJcMDMzWzE7OTNtKVwwMzNbMTs5M20gTmFtZVwwMzNbMTs5MW0gOlwwMzNbMTs5N20gIitvcFsibmFtZSJdCgkJZXhjZXB0IEtleUVycm9yOgoJCQlwcmludCJcMDMzWzE7OTFtWyFdIFx4MWJbMTs5MW1JRCBOb3QgRm91bmQhIgoJCQlyYXdfaW5wdXQoIlxuXDAzM1sxOzk3bShcMDMzWzE7OTNtQmFja1wwMzNbMTs5N21dIikKCQkJc3VwZXIoKQoJCWphbGFuKCdcMDMzWzE7OTFtKFwwMzNbMTs5N23igKJcMDMzWzE7OTFtKVwwMzNbMTs5M21HZXR0aW5nIElEIFwwMzNbMTs5M20uLi4nKQoJCXIgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWR0KyIvZnJpZW5kcz9hY2Nlc3NfdG9rZW49Iit0b2tldCkKCQl6ID0ganNvbi5sb2FkcyhyLnRleHQpCgkJZm9yIGkgaW4gelsnZGF0YSddOgoJCQlpZC5hcHBlbmQoaVsnaWQnXSkKCWVsaWYgcGVhayA9PSIzIjoKCQlvcy5zeXN0ZW0oJ2NsZWFyJykKCQlwcmludCBsb2dvCgkJYnJ1dGUoKQkKCWVsaWYgcGVhayA9PSIwIjoKCQltZW51KCkKCWVsc2U6CgkJcHJpbnQgIlwwMzNbMTs5MW0oXDAzM1sxOzkxbeKAolwwMzNbMTs5NykgXHgxYlsxOzkxbUZpbGwgaW4gY29ycmVjdGx5IgoJCXBpbGloX3N1cGVyKCkKCQoJcHJpbnQgIlwwMzNbMTszMW0oXDAzM1sxOzM3beKAolwwMzNbMTs5MW0pIFwwMzNbMTszM21Ub3RhbCBJRCBcMDMzWzE7OTFtOiBcMDMzWzE7OTdtIitzdHIobGVuKGlkKSkKCWphbGFuKCdcMDMzWzE7MzFte1wwMzNbMTszN23igKJcMDMzWzE7OTFtKSBcMDMzWzE7MzNtU3RhcnRpbmcgXDAzM1sxOzkzbS4uLicpCgl0aXRpayA9IFsnLiAgICcsJy4uICAnLCcuLi4gJ10KCWZvciBvIGluIHRpdGlrOgoJCXByaW50KCJcclwwMzNbMTs5MW0oXDAzM1sxOzk3beKAolwwMzNbMTo5MW0pIFwwMzNbMTs5M21DcmFja2luZyBcMDMzWzE7OTdtIitvKSw7c3lzLnN0ZG91dC5mbHVzaCgpO3RpbWUuc2xlZXAoMSkKCWphbGFuKCJcbkNyYWNrIFNlZGFuZyBCZXJqYWxhbi4uLiIgKQoJcHJpbnQgIlwwMzNbMTszNG3ilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAiCglwcmludAoJZGVmIG1haW4oYXJnKToKCQlnbG9iYWwgY2VrcG9pbnQsb2tzCgkJdXNlciA9IGFyZwoJCXRyeToKCQkJb3MubWtkaXIoJ291dCcpCgkJZXhjZXB0IE9TRXJyb3I6CgkJCXBhc3MKCQl0cnk6CgkJCXggPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycrdXNlcisnLz9hY2Nlc3NfdG9rZW49Jyt0b2tldCkKCQkJeiA9IGpzb24ubG9hZHMoYS50ZXh0KQoJCQlwYXNzMSA9IGJbJ2ZpcnN0X25hbWUnXSsnMTIzJwoJIAkJZGF0YSA9IHVybGxpYi51cmxvcGVuKCJodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbj9hY2Nlc3NfdG9rZW49MjM3NzU5OTA5NTkxNjU1JTI1MjU3QzBmMTQwYWFiZWRmYjY1YWMyN2E3MzllZDFhMjI2M2IxJmZvcm1hdD1qc29uJnNka192ZXJzaW9uPTImZW1haWw9IisodXNlcikrIiZsb2NhbGU9ZW5fVVMmcGFzc3dvcmQ9IisocGFzczEpKyImc2RrPWlvcyZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZzaWc9M2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYiKQoJCQlxID0ganNvbi5sb2FkKGRhdGEpCgkJCWlmICdhY2Nlc3NfdG9rZW4nIGluIHE6CiAgICAgCgkJCQl4ID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK3VzZXIrIj9hY2Nlc3NfdG9rZW49Iit3WydhY2Nlc3NfdG9rZW4nXSkKCQkJCXogPSBqc29uLmxvYWRzKHgudGV4dCkKCQkJCXByaW50ICdceDFjXDAzM1sxOzkzbVvinJZdIFx4MWNcMDMzWzE7OTFtQ2hlY2twb2ludCcKCQkJCXByaW50ICdceDFjXDAzM1sxOzkxbVvinLRdIFx4MWNcMDMzWzE7OTNtTmFtZSBceDFjXDAzM1sxOzk0bSAgICA6IFx4MWNcMDMzWzE7OTdtJyArIGNbJ25hbWUnXQoJCQkJcHJpbnQgJ1x4MWNcMDMzWzE7OTFtW+KeuV0gXHgxY1wwMzNbMTs5M21JRCBceDFjXDAzM1sxOzk0bSAgICAgIDogXHgxY1wwMzNbMTs5N20nICsgdXNlcgoJCQkJcHJpbnQgJ1x4MWNcMDMzWzE7OTFtW+KeuV0gXHgxY1wwMzNbMTs5M21QYXNzd29yZCBceDFjXDAzM1sxOzk0bTogXHgxY1wwMzNbMTs5N20nICsgcGFzczEgKyAnXG4nCgkJCQljZWsgPSBvcGVuKCJvdXQvc3VwZXJfY3AudHh0IiwgImEiKQoJCQkJY2VrLndyaXRlKCJJRDoiICt1c2VyKyAiIFB3OiIgK3Bhc3MxKyJcbiIpCgkJCQljZWsuY2xvc2UoKQoJCQkJY2VrcG9pbnQuYXBwZW5kKHVzZXIrcGFzczEpCgkJCWVsc2U6CgkJCQlwYXNzMiA9IGJbJ2xhc3RfbmFtZSddKycxMjMnCgkJCQlkYXRhID0gdXJsbGliLnVybG9wZW4oImh0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0iKyh1c2VyKSsiJmxvY2FsZT1lbl9VUyZwYXNzd29yZD0iKyhwYXNzMikrIiZzZGs9aW9zJmdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xJnNpZz0zZjU1NWY5OWZiNjFmY2Q3YWEwYzQ0ZjU4ZjUyMmVmNiIpCgkJCQlxID0ganNvbi5sb2FkKGRhdGEpCgkJCQlpZiAnYWNjZXNzX3Rva2VuJyBpbiBxOgogICAgICAgCQoJCQkJCQl4ID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK3VzZXIrIj9hY2Nlc3NfdG9rZW49Iit3WydhY2Nlc3NfdG9rZW4nXSkKCQkJCQkJeiA9IGpzb24ubG9hZHMoeC50ZXh0KQoJCQkJCQlwcmludCAnXHgxY1wwMzNbMTs5M21b4pyUXSBceDFjXDAzM1sxOzkybUJlcmhhc2lsJwoJCQkJCQlwcmludCAnXHgxY1wwMzNbMTs5M21b4py0XSBceDFjXDAzM1sxOzk3bU5hbWUgXHgxY1wwMzNbMTs5MW0gICAgOiBceDFjXDAzM1sxOzkybScgKyBjWyduYW1lJ10KCQkJCQkJcHJpbnQgJ1x4MWNcMDMzWzE7OTNtW+KeuV0gXHgxY1wwMzNbMTs5N21JRCBceDFjXDAzM1sxOzkxbSAgICAgIDogXHgxY1wwMzNbMTs5Mm0nICsgdXNlcgoJCQkJCQlwcmludCAnXHgxY1wwMzNbMTs5M21b4p65XSBceDFjXDAzM1sxOzk3bVBhc3N3b3JkIFx4MWNcMDMzWzE7OTFtOiBceDFjXDAzM1sxOzkybScgKyBwYXNzMiArICdcbicKCQkJCQkJb2tzLmFwcGVuZCh1c2VyK3Bhc3MyKQoJCQkJZWxzZToKCQkJCQkJCWlmICd3d3cuZmFjZWJvb2suY29tJyBpbiB3WydlcnJvcl9tc2cnXToKCQkJCQkJCQkJcHJpbnQgJ1x4MWNcMDMzWzE7OTNtW+Kcll0gXHgxY1wwMzNbMTs5MW1DaGVja3BvaW50JwoJCQkJCQkJCQlwcmludCAnXHgxY1wwMzNbMTs5MW1b4py0XSBceDFjXDAzM1sxOzkzbU5hbWUgXHgxY1wwMzNbMTs5NG0gICAgOiBceDFjXDAzM1sxOzk3bScgKyBjWyduYW1lJ10KCQkJCQkJCQkJcHJpbnQgJ1x4MWNcMDMzWzE7OTFtW+KeuV0gXHgxY1wwMzNbMTs5M21JRCBceDFjXDAzM1sxOzk0bSAgICAgIDogXHgxY1wwMzNbMTs5N20nICsgdXNlcgoJCQkJCQkJCQlwcmludCAnXHgxY1wwMzNbMTs5MW1b4p65XSBceDFjXDAzM1sxOzkzbVBhc3N3b3JkIFx4MWNcMDMzWzE7OTRtOiBceDFjXDAzM1sxOzk3bScgKyBwYXNzMiArICdcbicKCQkJCQkJCQkJY2VrID0gb3Blbigib3V0L3N1cGVyX2NwLnR4dCIsICJhIikKCQkJCQkJCQkJY2VrLndyaXRlKCJJRDoiICt1c2VyKyAiIFB3OiIgK3Bhc3MyKyJcbiIpCgkJCQkJCQkJCWNlay5jbG9zZSgpCgkJCQkJCQkJCWNla3BvaW50LmFwcGVuZCh1c2VyK3Bhc3MyKQoJCQkJCQkJZWxzZToKCQkJCQkJCQkJcGFzczMgPSBiWydmaXJzdF9uYW1lJ10gKyAnMTIzNDUnCgkJCQkJCQkJCWRhdGEgPXVybGxpYi51cmxvcGVuKCJodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbj9hY2Nlc3NfdG9rZW49MjM3NzU5OTA5NTkxNjU1JTI1MjU3QzBmMTQwYWFiZWRmYjY1YWMyN2E3MzllZDFhMjI2M2IxJmZvcm1hdD1qc29uJnNka192ZXJzaW9uPTImZW1haWw9IisodXNlcikrIiZsb2NhbGU9ZW5fVVMmcGFzc3dvcmQ9IisocGFzczMpKyImc2RrPWlvcyZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZzaWc9M2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYiKQoJCQkJCQkJCQlxID0ganNvbi5sb2FkKGRhdGEpCgkJCQkJCQkJCWlmICdhY2Nlc3NfdG9rZW4nIGluIHE6CiAgICAgCgkJCQkJCQkJICAgCQkgeCA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIit1c2VyKyI/YWNjZXNzX3Rva2VuPSIrd1snYWNjZXNzX3Rva2VuJ10pCgkJCQkJCQkJCSAJIHogPSBqc29uLmxvYWRzKHgudGV4dCkKCQkJCQkJCQkJCSBwcmludCAnXHgxY1wwMzNbMTs5M21b4pyUXSBceDFjXDAzM1sxOzkybUJlcmhhc2lsJwoJCQkJCQkJCQkJIHByaW50ICdceDFjXDAzM1sxOzkzbVvinLRdIFx4MWNcMDMzWzE7OTdtTmFtZSBceDFjXDAzM1sxOzkxbSAgICA6IFx4MWNcMDMzWzE7OTJtJyArIGNbJ25hbWUnXQoJCQkJCQkJCQkJIHByaW50ICdceDFjXDAzM1sxOzkzbVvinrldIFx4MWNcMDMzWzE7OTdtSUQgXHgxY1wwMzNbMTs5MW0gICAgICA6IFx4MWNcMDMzWzE7OTJtJyArIHVzZXIKCQkJCQkJCQkJCSBwcmludCAnXHgxY1wwMzNbMTs5M21b4p65XSBceDFjXDAzM1sxOzk3bVBhc3N3b3JkIFx4MWNcMDMzWzE7OTFtOiBceDFjXDAzM1sxOzkybScgKyBwYXNzMyArICdcbicKCQkJCQkJCQkJCSBva3MuYXBwZW5kKHVzZXIrcGFzczMpCgkJCQkJCQkJCWVsc2U6CgkJCQkJCQkJCQkJaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHdbJ2Vycm9yX21zZyddOgoJCQkJCQkJCQkJCQlwcmludCAnXHgxY1wwMzNbMTs5M21b4pyWXSBceDFjXDAzM1sxOzkxbUNoZWNrcG9pbnQnCgkJCQkJCQkJCQkJCXByaW50ICdceDFjXDAzM1sxOzkxbVvinLRdIFx4MWNcMDMzWzE7OTNtTmFtZSBceDFjXDAzM1sxOzk0bSAgICA6IFx4MWNcMDMzWzE7OTdtJyArIGNbJ25hbWUnXQoJCQkJCQkJCQkJCQlwcmludCAnXHgxY1wwMzNbMTs5MW1b4p65XSBceDFjXDAzM1sxOzkzbUlEIFx4MWNcMDMzWzE7OTRtICAgICAgOiBceDFjXDAzM1sxOzk3bScgKyB1c2VyCgkJCQkJCQkJCQkJCXByaW50ICdceDFjXDAzM1sxOzkxbVvinrldIFx4MWNcMDMzWzE7OTNtUGFzc3dvcmQgXHgxY1wwMzNbMTs5NG06IFx4MWNcMDMzWzE7OTdtJyArIHBhc3MzICsgJ1xuJwoJCQkJCQkJCQkJCQljZWsgPSBvcGVuKCJvdXQvc3VwZXJfY3AudHh0IiwgImEiKQoJCQkJCQkJCQkJCQljZWsud3JpdGUoIklEOiIgK3VzZXIrICIgUHc6IiArcGFzczMrIlxuIikKCQkJCQkJCQkJCQkJY2VrLmNsb3NlKCkKCQkJCQkJCQkJCQkJY2VrcG9pbnQuYXBwZW5kKHVzZXIrcGFzczMpCgkJCQkJCQkJCQkJZWxzZToKCQkJCQkJCQkJCQkJcGFzczQgPSAnc2F5YW5nJwoJCQkJCQkJCQkJCQlkYXRhID0gdXJsbGliLnVybG9wZW4oImh0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0iKyh1c2VyKSsiJmxvY2FsZT1lbl9VUyZwYXNzd29yZD0iKyhwYXNzNCkrIiZzZGs9aW9zJmdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xJnNpZz0zZjU1NWY5OWZiNjFmY2Q3YWEwYzQ0ZjU4ZjUyMmVmNiIpCgkJCQkJCQkJCQkJCXEgPSBqc29uLmxvYWQoZGF0YSkKCQkJCQkJCQkJCQkJaWYgJ2FjY2Vzc190b2tlbicgaW4gcToKICAgICAgIAoJCQkJCQkJCQkJCQkJeCA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIit1c2VyKyI/YWNjZXNzX3Rva2VuPSIrd1snYWNjZXNzX3Rva2VuJ10pCgkJCQkJCQkJCQkJCQl6ID0ganNvbi5sb2Fkcyh4LnRleHQpCgkJCQkJCQkJCQkJCQlwcmludCAnXHgxY1wwMzNbMTs5M21b4pyUXSBceDFjXDAzM1sxOzkybUJlcmhhc2lsJwoJCQkJCQkJCQkJCQkJcHJpbnQgJ1x4MWNcMDMzWzE7OTNtW+KctF0gXHgxY1wwMzNbMTs5N21OYW1lIFx4MWNcMDMzWzE7OTFtICAgIDogXHgxY1wwMzNbMTs5Mm0nICsgY1snbmFtZSddCgkJCQkJCQkJCQkJCQlwcmludCAnXHgxY1wwMzNbMTs5M21b4p65XSBceDFjXDAzM1sxOzk3bUlEIFx4MWNcMDMzWzE7OTFtICAgICAgOiBceDFjXDAzM1sxOzkybScgKyB1c2VyCgkJCQkJCQkJCQkJCQlwcmludCAnXHgxY1wwMzNbMTs5M21b4p65XSBceDFjXDAzM1sxOzk3bVBhc3N3b3JkIFx4MWNcMDMzWzE7OTFtOiBceDFjXDAzM1sxOzkybScgKyBwYXNzNCArICdcbicKCQkJCQkJCQkJCQkJCW9rcy5hcHBlbmQodXNlcitwYXNzNCkKCQkJCQkJCQkJCQkJZWxzZToKCQkJCQkJCQkJCQkJCWlmICd3d3cuZmFjZWJvb2suY29tJyBpbiB3WydlcnJvcl9tc2cnXToKCQkJCQkJCQkJCQkJCQlwcmludCAnXHgxY1wwMzNbMTs5M21b4pyWXSBceDFjXDAzM1sxOzkxbUNoZWNrcG9pbnQnCgkJCQkJCQkJCQkJCQkJcHJpbnQgJ1x4MWNcMDMzWzE7OTFtW+KctF0gXHgxY1wwMzNbMTs5M21OYW1lIFx4MWNcMDMzWzE7OTRtICAgIDogXHgxY1wwMzNbMTs5N20nICsgY1snbmFtZSddCgkJCQkJCQkJCQkJCQkJcHJpbnQgJ1x4MWNcMDMzWzE7OTFtW+KeuV0gXHgxY1wwMzNbMTs5M21JRCBceDFjXDAzM1sxOzk0bSAgICAgIDogXHgxY1wwMzNbMTs5N20nICsgdXNlcgoJCQkJCQkJCQkJCQkJCXByaW50ICdceDFjXDAzM1sxOzkxbVvinrldIFx4MWNcMDMzWzE7OTNtUGFzc3dvcmQgXHgxY1wwMzNbMTs5NG06IFx4MWNcMDMzWzE7OTdtJyArIHBhc3M0ICsgJ1xuJwoJCQkJCQkJCQkJCQkJCWNlayA9IG9wZW4oIm91dC9zdXBlcl9jcC50eHQiLCAiYSIpCgkJCQkJCQkJCQkJCQkJY2VrLndyaXRlKCJJRDoiICt1c2VyKyAiIFB3OiIgK3Bhc3M0KyJcbiIpCgkJCQkJCQkJCQkJCQkJY2VrLmNsb3NlKCkKCQkJCQkJCQkJCQkJCQljZWtwb2ludC5hcHBlbmQodXNlcitwYXNzNCkKCQkJCQkJCQkJCQkJCWVsc2U6CgkJCQkJCQkJCQkJCQkJcGFzczUgPSAnYmFuZ3NhdCcKCQkJCQkJCQkJCQkJCQlkYXRhID0gdXJsbGliLnVybG9wZW4oImh0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0iKyh1c2VyKSsiJmxvY2FsZT1lbl9VUyZwYXNzd29yZD0iKyhwYXNzNSkrIiZzZGs9aW9zJmdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xJnNpZz0zZjU1NWY5OWZiNjFmY2Q3YWEwYzQ0ZjU4ZjUyMmVmNiIpCgkJCQkJCQkJCQkJCQkJcSA9IGpzb24ubG9hZChkYXRhKQoJCQkJCQkJCQkJCQkJCWlmICdhY2Nlc3NfdG9rZW4nIGluIHE6CiAgICAgICAgCgkJCQkJCQkJCQkJCQkJCXggPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIrdXNlcisiP2FjY2Vzc190b2tlbj0iK3dbJ2FjY2Vzc190b2tlbiddKQoJCQkJCQkJCQkJCQkJCQl6ID0ganNvbi5sb2Fkcyh4LnRleHQpCgkJCQkJCQkJCQkJCQkJCXByaW50ICdceDFjXDAzM1sxOzkzbVvinJRdIFx4MWNcMDMzWzE7OTJtQmVyaGFzaWwnCgkJCQkJCQkJCQkJCQkJCXByaW50ICdceDFjXDAzM1sxOzkzbVvinLRdIFx4MWNcMDMzWzE7OTdtTmFtZSBceDFjXDAzM1sxOzkxbSAgICA6IFx4MWNcMDMzWzE7OTJtJyArIGNbJ25hbWUnXQoJCQkJCQkJCQkJCQkJCQlwcmludCAnXHgxY1wwMzNbMTs5M21b4p65XSBceDFjXDAzM1sxOzk3bUlEIFx4MWNcMDMzWzE7OTFtICAgICAgOiBceDFjXDAzM1sxOzkybScgKyB1c2VyCgkJCQkJCQkJCQkJCQkJCXByaW50ICdceDFjXDAzM1sxOzkzbVvinrldIFx4MWNcMDMzWzE7OTdtUGFzc3dvcmQgXHgxY1wwMzNbMTs5MW06IFx4MWNcMDMzWzE7OTJtJyArIHBhc3M1ICsgJ1xuJwoJCQkJCQkJCQkJCQkJCQlva3MuYXBwZW5kKHVzZXIrcGFzczUpCgkJCQkJCQkJCQkJCQkJZWxzZToKCQkJCQkJCQkJCQkJCQkJaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHdbJ2Vycm9yX21zZyddOgoJCQkJCQkJCQkJCQkJCQkJcHJpbnQgJ1x4MWNcMDMzWzE7OTNtW+Kcll0gXHgxY1wwMzNbMTs5MW1DaGVja3BvaW50JwoJCQkJCQkJCQkJCQkJCQkJcHJpbnQgJ1x4MWNcMDMzWzE7OTFtW+KctF0gXHgxY1wwMzNbMTs5M21OYW1lIFx4MWNcMDMzWzE7OTRtICAgIDogXHgxY1wwMzNbMTs5N20nICsgY1snbmFtZSddCgkJCQkJCQkJCQkJCQkJCQlwcmludCAnXHgxY1wwMzNbMTs5MW1b4p65XSBceDFjXDAzM1sxOzkzbUlEIFx4MWNcMDMzWzE7OTRtICAgICAgOiBceDFjXDAzM1sxOzk3bScgKyB1c2VyCgkJCQkJCQkJCQkJCQkJCQlwcmludCAnXHgxY1wwMzNbMTs5MW1b4p65XSBceDFjXDAzM1sxOzkzbVBhc3N3b3JkIFx4MWNcMDMzWzE7OTRtOiBceDFjXDAzM1sxOzk3bScgKyBwYXNzNSArICdcbicKCQkJCQkJCQkJCQkJCQkJCWNlayA9IG9wZW4oIm91dC9zdXBlcl9jcC50eHQiLCAiYSIpCgkJCQkJCQkJCQkJCQkJCQljZWsud3JpdGUoIklEOiIgK3VzZXIrICIgUHc6IiArcGFzczUrIlxuIikKCQkJCQkJCQkJCQkJCQkJCWNlay5jbG9zZSgpCgkJCQkJCQkJCQkJCQkJCQljZWtwb2ludC5hcHBlbmQodXNlcitwYXNzNSkKCQkJCQkJCQkJCQkJCQkJZWxzZToKCQkJCQkJCQkJCQkJCQkJCXBhc3M2ID0gJ2tvbnRvbCcKCQkJCQkJCQkJCQkJCQkJCWRhdGEgPSB1cmxsaWIudXJsb3BlbigiaHR0cHM6Ly9iLWFwaS5mYWNlYm9vay5jb20vbWV0aG9kL2F1dGgubG9naW4/YWNjZXNzX3Rva2VuPTIzNzc1OTkwOTU5MTY1NSUyNTI1N0MwZjE0MGFhYmVkZmI2NWFjMjdhNzM5ZWQxYTIyNjNiMSZmb3JtYXQ9anNvbiZzZGtfdmVyc2lvbj0yJmVtYWlsPSIrKHVzZXIpKyImbG9jYWxlPWVuX1VTJnBhc3N3b3JkPSIrKHBhc3M2KSsiJnNkaz1pb3MmZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzPTEmc2lnPTNmNTU1Zjk5ZmI2MWZjZDdhYTBjNDRmNThmNTIyZWY2IikKCQkJCQkJCQkJCQkJCQkJCXEgPSBqc29uLmxvYWQoZGF0YSkKCQkJCQkJCQkJCQkJCQkJCWlmICdhY2Nlc3NfdG9rZW4nIGluIHE6CiAgICAgICAgCgkJCQkJCQkJCQkJCQkJCQkJeCA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIit1c2VyKyI/YWNjZXNzX3Rva2VuPSIrd1snYWNjZXNzX3Rva2VuJ10pCgkJCQkJCQkJCQkJCQkJCQkJeiA9IGpzb24ubG9hZHMoeC50ZXh0KQoJCQkJCQkJCQkJCQkJCQkJCXByaW50ICdceDFjXDAzM1sxOzkzbVvinJRdIFx4MWNcMDMzWzE7OTJtQmVyaGFzaWwnCgkJCQkJCQkJCQkJCQkJCQkJcHJpbnQgJ1x4MWNcMDMzWzE7OTNtW+KctF0gXHgxY1wwMzNbMTs5N21OYW1lIFx4MWNcMDMzWzE7OTFtICAgIDogXHgxY1wwMzNbMTs5Mm0nICsgY1snbmFtZSddCgkJCQkJCQkJCQkJCQkJCQkJcHJpbnQgJ1x4MWNcMDMzWzE7OTNtW+KeuV0gXHgxY1wwMzNbMTs5N21JRCBceDFjXDAzM1sxOzkxbSAgICAgIDogXHgxY1wwMzNbMTs5Mm0nICsgdXNlcgoJCQkJCQkJCQkJCQkJCQkJCXByaW50ICdceDFjXDAzM1sxOzkzbVvinrldIFx4MWNcMDMzWzE7OTdtUGFzc3dvcmQgXHgxY1wwMzNbMTs5MW06IFx4MWNcMDMzWzE7OTJtJyArIHBhc3M2ICsgJ1xuJwoJCQkJCQkJCQkJCQkJCQkJCW9rcy5hcHBlbmQodXNlcitwYXNzNikKCQkJCQkJCQkJCQkJCQkJCWVsc2U6CgkJCQkJCQkJCQkJCQkJCQkJaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHdbJ2Vycm9yX21zZyddOgoJCQkJCQkJCQkJCQkJCQkJCQlwcmludCAnXHgxY1wwMzNbMTs5M21b4pyWXSBceDFjXDAzM1sxOzkxbUNoZWNrcG9pbnQnCgkJCQkJCQkJCQkJCQkJCQkJCXByaW50ICdceDFjXDAzM1sxOzkxbVvinLRdIFx4MWNcMDMzWzE7OTNtTmFtZSBceDFjXDAzM1sxOzk0bSAgICA6IFx4MWNcMDMzWzE7OTdtJyArIGNbJ25hbWUnXQoJCQkJCQkJCQkJCQkJCQkJCQlwcmludCAnXHgxY1wwMzNbMTs5MW1b4p65XSBceDFjXDAzM1sxOzkzbUlEIFx4MWNcMDMzWzE7OTRtICAgICAgOiBceDFjXDAzM1sxOzk3bScgKyB1c2VyCgkJCQkJCQkJCQkJCQkJCQkJCXByaW50ICdceDFjXDAzM1sxOzkxbVvinrldIFx4MWNcMDMzWzE7OTNtUGFzc3dvcmQgXHgxY1wwMzNbMTs5NG06IFx4MWNcMDMzWzE7OTdtJyArIHBhc3M2ICsgJ1xuJwoJCQkJCQkJCQkJCQkJCQkJCQljZWsgPSBvcGVuKCJvdXQvc3VwZXJfY3AudHh0IiwgImEiKQoJCQkJCQkJCQkJCQkJCQkJCQljZWsud3JpdGUoIklEOiIgK3VzZXIrICIgUHc6IiArcGFzczYrIlxuIikKCQkJCQkJCQkJCQkJCQkJCQkJY2VrLmNsb3NlKCkKCQkJCQkJCQkJCQkJCQkJCQkJY2VrcG9pbnQuYXBwZW5kKHVzZXIrcGFzczYpCgkJCQkJCQkJCQkJCQkJCQkJZWxzZToKCQkJCQkJCQkJCQkJCQkJCQkJcGFzczcgPSAnaW5kb25lc2lhJwoJCQkJCQkJCQkJCQkJCQkJCQlkYXRhID0gdXJsbGliLnVybG9wZW4oImh0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0iKyh1c2VyKSsiJmxvY2FsZT1lbl9VUyZwYXNzd29yZD0iKyhwYXNzNykrIiZzZGs9aW9zJmdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xJnNpZz0zZjU1NWY5OWZiNjFmY2Q3YWEwYzQ0ZjU4ZjUyMmVmNiIpCgkJCQkJCQkJCQkJCQkJCQkJCXEgPSBqc29uLmxvYWQoZGF0YSkKCQkJCQkJCQkJCQkJCQkJCQkJaWYgJ2FjY2Vzc190b2tlbicgaW4gcToKICAgICAgIAoJCQkJCQkJCQkJCQkJCQkJCQkJeCA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIit1c2VyKyI/YWNjZXNzX3Rva2VuPSIrd1snYWNjZXNzX3Rva2VuJ10pCgkJCQkJCQkJCQkJCQkJCQkJCQl6ID0ganNvbi5sb2Fkcyh4LnRleHQpCgkJCQkJCQkJCQkJCQkJCQkJCQlwcmludCAnXHgxY1wwMzNbMTs5M21b4pyUXSBceDFjXDAzM1sxOzkybUJlcmhhc2lsJwoJCQkJCQkJCQkJCQkJCQkJCQkJcHJpbnQgJ1x4MWNcMDMzWzE7OTNtW+KctF0gXHgxY1wwMzNbMTs5N21OYW1lIFx4MWNcMDMzWzE7OTFtICAgIDogXHgxY1wwMzNbMTs5Mm0nICsgY1snbmFtZSddCgkJCQkJCQkJCQkJCQkJCQkJCQlwcmludCAnXHgxY1wwMzNbMTs5M21b4p65XSBceDFjXDAzM1sxOzk3bUlEIFx4MWNcMDMzWzE7OTFtICAgOiBceDFjXDAzM1sxOzkybScgKyB1c2VyCgkJCQkJCQkJCQkJCQkJCQkJCQlwcmludCAnXHgxY1wwMzNbMTs5M21b4p65XSBceDFjXDAzM1sxOzk3bVBhc3N3b3JkIFx4MWNcMDMzWzE7OTFtOiBceDFjXDAzM1sxOzkybScgKyBwYXNzNyArICdcbicKCQkJCQkJCQkJCQkJCQkJCQkJCW9rcy5hcHBlbmQodXNlcitwYXNzNykKCQkJCQkJCQkJCQkJCQkJCQkJZWxzZToKCQkJCQkJCQkJCQkJCQkJCQkJCWlmICd3d3cuZmFjZWJvb2suY29tJyBpbiB3WydlcnJvcl9tc2cnXToKCQkJCQkJCQkJCQkJCQkJCQkJCQlwcmludCAnXHgxY1wwMzNbMTs5M21b4pyWXSBceDFjXDAzM1sxOzkxbUNoZWNrcG9pbnQnCgkJCQkJCQkJCQkJCQkJCQkJCQkJcHJpbnQgJ1x4MWNcMDMzWzE7OTFtW+KctF0gXHgxY1wwMzNbMTs5M21OYW1lIFx4MWNcMDMzWzE7OTRtICAgIDogXHgxY1wwMzNbMTs5N20nICsgY1snbmFtZSddCgkJCQkJCQkJCQkJCQkJCQkJCQkJcHJpbnQgJ1x4MWNcMDMzWzE7OTFtW+KeuV0gXHgxY1wwMzNbMTs5M21JRCBceDFjXDAzM1sxOzk0bSAgICAgIDogXHgxY1wwMzNbMTs5N20nICsgdXNlcgoJCQkJCQkJCQkJCQkJCQkJCQkJCXByaW50ICdceDFjXDAzM1sxOzkxbVvinrldIFx4MWNcMDMzWzE7OTNtUGFzc3dvcmQgXHgxY1wwMzNbMTs5NG06IFx4MWNcMDMzWzE7OTdtJyArIHBhc3M3ICsgJ1xuJwoJCQkJCQkJCQkJCQkJCQkJCQkJCWNlayA9IG9wZW4oIm91dC9zdXBlcl9jcC50eHQiLCAiYSIpCgkJCQkJCQkJCQkJCQkJCQkJCQkJY2VrLndyaXRlKCJJRDoiICt1c2VyKyAiIFB3OiIgK3Bhc3M3KyJcbiIpCgkJCQkJCQkJCQkJCQkJCQkJCQkJY2VrLmNsb3NlKCkKCQkJCQkJCQkJCQkJCQkJCQkJCQljZWtwb2ludC5hcHBlbmQodXNlcitwYXNzNykKCQkJCQkJCQkJCQkJCQkJCQkJCgkJCQkJCQkJCQkJCQkJCQoJCWV4Y2VwdDoKCQkJcGFzcwoJCQoJcCA9IFRocmVhZFBvb2woMzApCglwLm1hcChtYWluLCBpZCkKCXByaW50ICdcMDMzWzE7OTJtUHJvY2VzcyBIYXMgQmVlbiBDb21wbGV0ZWQnCglwcmludCJcMDMzWzE7OTFtVG90YWwgT0svXHgxYlsxOzkzbUNQIFwwMzNbMTs5MW06IFwwMzNbMTs5MW0iK3N0cihsZW4ob2tzKSkrIlwwMzNbMTs5M20vXDAzM1sxOzk2bSIrc3RyKGxlbihjZWtwb2ludCkpCglwcmludCAKCXJhd19pbnB1dCgiXG5cMDMzWzE7OTNtW1wwMzNbMTs5MW1CYWNrXDAzM1sxOzkzbV0iKQoJb3Muc3lzdGVtKCdjbGVhcicpCgkKZGVmIGJydXRlKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXDAzM1sxOzk3bVshXSBUb2tlbiBub3QgZm91bmQnCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICBsb2dpbigpCiAgICBlbHNlOgogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludAogICAgICAgIHRyeToKICAgICAgICAgICAgZW1haWwgPSByYXdfaW5wdXQoJ1wwMzNbMTs5M21bK10gXDAzM1sxOzk3bUlEXDAzM1sxOzk3bS9cMDMzWzE7OTdtRW1haWwgXDAzM1sxOzk3bVRhcmdldCBcMDMzWzE7OTdtOlwwMzNbMTs5N20gJykKICAgICAgICAgICAgcGFzc3cgPSByYXdfaW5wdXQoJ1wwMzNbMTs5M21bK10gXDAzM1sxOzk3bVdvcmRsaXN0IFwwMzNbMTs5N21leHQod29yZC50eHQpIFwwMzNbMTs5N206IFwwMzNbMTs5N20nKQogICAgICAgICAgICB0b3RhbCA9IG9wZW4ocGFzc3csICdyJykKICAgICAgICAgICAgdG90YWwgPSB0b3RhbC5yZWFkbGluZXMoKQogICAgICAgICAgICBwcmludCAKICAgICAgICAgICAgcHJpbnQgJ1wwMzNbMTs5M21bXDAzM1sxOzk3bVx4ZTJceDljXHg5M1wwMzNbMTs5M21dIFwwMzNbMTs5N21UYXJnZXQgXDAzM1sxOzk3bTpcMDMzWzE7OTdtICcgKyBlbWFpbAogICAgICAgICAgICBwcmludCAnXDAzM1sxOzkzbVsrXSBcMDMzWzE7OTdtVG90YWxcMDMzWzE7OTdtICcgKyBzdHIobGVuKHRvdGFsKSkgKyAnIFwwMzNbMTs5N21QYXNzd29yZCcKICAgICAgICAgICAgamFsYW4oJ1wwMzNbMTs5M21bXHhlMlx4OWNceGJhXSBcMDMzWzE7OTdtUGxlYXNlIHdhaXQgXDAzM1sxOzk3bS4uLicpCiAgICAgICAgICAgIHNhbmRpID0gb3BlbihwYXNzdywgJ3InKQogICAgICAgICAgICBmb3IgcHcgaW4gc2FuZGk6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgcHcgPSBwdy5yZXBsYWNlKCdcbicsICcnKQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQud3JpdGUoJ1xyXDAzM1sxOzkzbVtcMDMzWzE7OTdtXHhlMlx4OWNceGI4XDAzM1sxOzkzbV0gXDAzM1sxOzk3bVRyeSBcMDMzWzE7OTdtJyArIHB3KQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0nICsgZW1haWwgKyAnJmxvY2FsZT1lbl9VUyZwYXNzd29yZD0nICsgcHcgKyAnJnNkaz1pb3MmZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzPTEmc2lnPTNmNTU1Zjk5ZmI2MWZjZDdhYTBjNDRmNThmNTIyZWY2JykKICAgICAgICAgICAgICAgICAgICBtcHNoID0ganNvbi5sb2FkcyhkYXRhLnRleHQpCiAgICAgICAgICAgICAgICAgICAgaWYgJ2FjY2Vzc190b2tlbicgaW4gbXBzaDoKICAgICAgICAgICAgICAgICAgICAgICAgZGFwYXQgPSBvcGVuKCdCcnV0ZS50eHQnLCAndycpCiAgICAgICAgICAgICAgICAgICAgICAgIGRhcGF0LndyaXRlKGVtYWlsICsgJyB8ICcgKyBwdyArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgIGRhcGF0LmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1xuXDAzM1sxOzk3bVsrXSBcMDMzWzE7OTdtRm91bmRlZC4nCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50IDUyICogJ1wwMzNbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdcMDMzWzE7OTNtW1x4ZTJceDllXHhiOV0gXDAzM1sxOzk3bVVzZXJuYW1lIFwwMzNbMTs5MW06XDAzM1sxOzk3bSAnICsgZW1haWwKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1wwMzNbMTs5M21bXHhlMlx4OWVceGI5XSBcMDMzWzE7OTdtUGFzc3dvcmQgXDAzM1sxOzkxbTpcMDMzWzE7OTdtICcgKyBwdwogICAgICAgICAgICAgICAgICAgICAgICBrZWx1YXIoKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBtcHNoWydlcnJvcl9tc2cnXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNla3MgPSBvcGVuKCdCcnV0ZWNla3BvaW50LnR4dCcsICd3JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNla3Mud3JpdGUoZW1haWwgKyAnIHwgJyArIHB3ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNla3MuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1xuXDAzM1sxOzkzbVsrXSBcMDMzWzE7OTFtRm91bmRlZC4nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdcMDMzWzE7OTFtWyFdIFwwMzNbMTs5MW1BY2NvdW50IE1heWJlIENoZWNrcG9pbnQnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXDAzM1sxOzkzbVtceGUyXHg5ZVx4YjldIFwwMzNbMTs5N21Vc2VybmFtZSBcMDMzWzE7OTFtOlwwMzNbMTs5N20gJyArIGVtYWlsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXDAzM1sxOzkzbVtceGUyXHg5ZVx4YjldIFwwMzNbMTs5N21QYXNzd29yZCBcMDMzWzE7OTFtOlwwMzNbMTs5N20gJyArIHB3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZWx1YXIoKQogICAgICAgICAgICAgICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdcMDMzWzE7OTdtWyFdIENvbm5lY3Rpb24gRXJyb3InCiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKQoKICAgICAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICAgICAgcHJpbnQgJ1wwMzNbMTs5N21bIV0gRmlsZSBub3QgZm91bmQuLi4nCiAgICAgICAgICAgIHByaW50ICIiIlxuXDAzM1sxOzk3bVshXSBcMDMzWzE7OTdtTG9va3MgbGlrZSB5b3UgZG9uJ3QgaGF2ZSBhIHdvcmRsaXN0IiIiCiAgICAgICAgICAgIHN1cGVyKCkKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6Cglsb2dpbigpCg=='))
